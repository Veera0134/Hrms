<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="form-content">
        <h1 style="color: #0056b3;">Employee Onboarding Form</h1>
        
        <form id="onboardingForm" novalidate>
            <div class="rows">
                <fieldset>
                    <legend style="color: #0056b3;">Personal Information</legend>
                    
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input 
                            type="text" 
                            id="fullName" 
                            name="fullName" 
                            required 
                            pattern="^[A-Z](?=.*[A-Z])[A-Za-z\s]{3,}$"
                            title="Name must start with a capital letter and contain only letters and spaces."
                        >
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="Empid">Emp-Id</label>
                        <input 
                            type="text" 
                            id="Empid" 
                            name="Empid" 
                            required 
                            pattern="^[A-Z]{3}0[0-9]{3}$" 
                            title="Emp-ID must start with 3 uppercase letters followed by 0 and remaining 3 numbers."
                        >
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" name="email" required>
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input 
                            type="tel" 
                            id="phone" 
                            name="phone" 
                            required 
                            pattern="^[0-9]{10}$"
                            title="Phone number must be 10 digits."
                        >
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" id="dob" name="dob" required>
                        <small class="error-message"></small>
                    </div>
                </fieldset>
                
                <fieldset>
                    <legend style="color: #0056b3;">Address</legend>
    
                    <div class="form-group">
                        <label for="streetAddress">Street Address</label>
                        <input type="text" id="streetAddress" name="streetAddress" required>
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" name="city" required>
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="state">State</label>
                        <input type="text" id="state" name="state" required>
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="zipCode">Zip Code</label>
                        <input 
                            type="text" 
                            id="zipCode" 
                            name="zipCode" 
                            required 
                            pattern="^\d{6}$"
                            title="Zip code must be 6 digits."
                        >
                        <small class="error-message"></small>
                    </div>
                </fieldset>
                
                <fieldset>
                    <legend style="color: #0056b3;">Banking Information</legend>
    
                    <div class="form-group">
                        <label for="bankName">Bank Name</label>
                        <input type="text" id="bankName" name="bankName" required>
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="mobileNumber">Mobile Number</label>
                        <input type="text" id="mobileNumber" name="mobileNumber" required pattern="^[0-9]{10}$">
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="accountNumber">Account Number</label>
                        <input type="text" id="accountNumber" name="accountNumber" required pattern="^[0-9]{8,20}$">
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="confirmAccountNumber">Confirm Account Number</label>
                        <input type="text" id="confirmAccountNumber" name="confirmAccountNumber" required pattern="^[0-9]{8,20}$">
                        <small class="error-message"></small>
                    </div>
    
                    <div class="form-group">
                        <label for="IFSCNumber">IFSC Number</label>
                        <input type="text" id="IFSCNumber" name="IFSCNumber" required pattern="^[A-Za-z]{4}[0-9]{7}$">
                        <small class="error-message"></small>
                    </div>
                </fieldset>
    
                <fieldset>
                    <legend style="color: #0056b3;">Qualification</legend>
                    <div class="form-group">
                        <label for="degree">Highest Degree</label>
                        <input type="text" id="degree" name="degree" required>
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="institution">Institution</label>
                        <input type="text" id="institution" name="institution" required>
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="graduationYear">Year of Graduation</label>
                        <input type="number" id="graduationYear" name="graduationYear" required min="1900" max="2099">
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="degreeCertificate">Upload Degree Certificate</label>
                        <input type="file" id="degreeCertificate" name="degreeCertificate" accept=".jpg, .jpeg, .png, .pdf" required>
                        <small class="error-message"></small>
                    </div>
                </fieldset>
    
                <fieldset>  
                    <legend style="color: #0056b3;">Experience (Optional)</legend>
                    <div class="form-group">
                        <label for="job-title">Job Title</label>
                        <input type="text" id="job-title" name="jobTitle" minlength="2" maxlength="100" pattern="^[A-Z][a-zA-Z\s]+$"
                        title="Job Title must start with a capital letter and contain only letters and spaces."
                        >
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="company-name">Company Name</label>
                        <input type="text" id="company-name" name="companyName" minlength="2" maxlength="100" pattern="^[A-Z][a-zA-Z\s]+$"
                        title="Company Name must start with a capital letter and contain only letters and spaces."
                        >
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" name="location" minlength="2" maxlength="100" pattern="^[A-Z][a-zA-Z\s]+$"
                        title="Location must start with a capital letter and contain only letters and spaces."
                        >
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="start-date">Start Date</label>
                        <input type="date" id="start-date" name="startDate">
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="end-date">End Date</label>
                        <input type="date" id="end-date" name="endDate">
                        <small class="error-message"></small>
                    </div>
                </fieldset>
                
                <fieldset>
                    <legend style="color: #0056b3;">Job Details</legend>
                    <div class="form-group">
                        <label for="job-role">Job Role</label>
                        <input type="text" id="job-role" name="jobRole" required>
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="startDate">Start Date</label>
                        <input type="date" id="startDate" name="startDate" required>
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="department">Department</label>
                        <input type="text" id="department" name="department" required>
                        <small class="error-message"></small>
                    </div>
                    <div class="form-group">
                        <label for="position">Position</label>
                        <input type="text" id="position" name="position" required>
                        <small class="error-message"></small>
                    </div>
                </fieldset>
            </div>
    
            <div class="form-actions">
                <button type="submit">Submit</button>
                <button type="reset">Reset</button>
            </div>
        </form>
    </div>

    <script>
        window.onload = function () {
            const today = new Date().toISOString().split("T")[0];
            
            // Set max date for DOB and job start date
            document.getElementById("dob").setAttribute("max", today);
            document.getElementById("startDate").setAttribute("max", today);
            
            // Handle experience dates
            const startDateInput = document.getElementById("start-date");
            const endDateInput = document.getElementById("end-date");

            startDateInput.setAttribute("max", today);

            startDateInput.addEventListener("change", function () {
                if (this.value) {
                    endDateInput.setAttribute("min", this.value);
                    document.querySelector("#start-date + .error-message").textContent = "";
                }
            });

            endDateInput.addEventListener("change", function () {
                if (this.value < startDateInput.value) {
                    document.querySelector("#end-date + .error-message").textContent =
                        "End date should not be earlier than the start date.";
                } else {
                    document.querySelector("#end-date + .error-message").textContent = "";
                }
            });
        };

        document.getElementById("onboardingForm").addEventListener("submit", function (event) {
            event.preventDefault();
            const formData = new FormData(this);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            const fields = [
                { id: "fullName", pattern: /^[A-Z](?=.*[A-Z])[A-Za-z\s]{3,}$/, errorMessage: "Name must start with a capital letter and contain only letters and spaces." },
                { id: "Empid", pattern: /^[A-Z]{3}0[0-9]{3}$/, errorMessage: "Emp-ID must start with 3 uppercase letters followed by 0 and remaining 3 numbers." },
                { id: "email", pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/, errorMessage: "Please enter a valid email address." },
                { id: "phone", pattern: /^[0-9]{10}$/, errorMessage: "Phone number must be 10 digits." },
                { id: "dob", pattern: /.+/, errorMessage: "Please select your date of birth." },
                { id: "streetAddress", pattern: /.+/, errorMessage: "Please enter your street address." },
                { id: "city", pattern: /.+/, errorMessage: "Please enter your city." },
                { id: "state", pattern: /.+/, errorMessage: "Please enter your state." },
                { id: "zipCode", pattern: /^\d{6}$/, errorMessage: "Zip code must be 6 digits." },
                { id: "bankName", pattern: /.+/, errorMessage: "Please enter the name of your bank." },
                { id: "mobileNumber", pattern: /^[0-9]{10}$/, errorMessage: "Please enter a valid 10-digit mobile number." },
                { id: "accountNumber", pattern: /^[0-9]{8,20}$/, errorMessage: "Please enter a valid account number." },
                { id: "confirmAccountNumber", pattern: /^[0-9]{8,20}$/, errorMessage: "Account numbers must match." },
                { id: "IFSCNumber", pattern: /^[A-Za-z]{4}[0-9]{7}$/, errorMessage: "Please enter a valid IFSC number." },
                { id: "degree", pattern: /.+/, errorMessage: "Please enter your highest degree." },
                { id: "institution", pattern: /.+/, errorMessage: "Please enter the name of your institution." },
                { id: "graduationYear", pattern: /^(19|20)\d{2}$/, errorMessage: "Please enter a valid graduation year between 1900 and 2099." },
                { id: "degreeCertificate", pattern: /.+/, errorMessage: "Please upload your degree certificate." },
                { id: "job-role", pattern: /^[a-zA-Z\s]{2,100}$/, errorMessage: "Job role must be at least 2 characters long and only contain letters and spaces." },
                { id: "startDate", pattern: /.+/, errorMessage: "Start Date must be a valid date." },
                { id: "department", pattern: /^[a-zA-Z\s]{2,100}$/, errorMessage: "Department must be at least 2 characters long and only contain letters and spaces." },
                { id: "position", pattern: /^[a-zA-Z\s]{2,100}$/, errorMessage: "Position must be at least 2 characters long and only contain letters and spaces." }
            ];

            let isValid = true;

            fields.forEach((field) => {
                const inputElement = document.getElementById(field.id);
                if (!inputElement) return;
                const errorElement = inputElement.nextElementSibling;

                if (!field.pattern.test(inputElement.value.trim())) {
                    errorElement.textContent = field.errorMessage;
                    errorElement.style.color = "red";
                    isValid = false;
                } else {
                    errorElement.textContent = "";
                }
            });

            // Validate account number match
            const accountNumber = document.getElementById("accountNumber")?.value.trim();
            const confirmAccountNumber = document.getElementById("confirmAccountNumber")?.value.trim();
            if (accountNumber !== confirmAccountNumber) {
                const confirmErrorElement = document.getElementById("confirmAccountNumber")?.nextElementSibling;
                confirmErrorElement.textContent = "Account numbers must match.";
                confirmErrorElement.style.color = "red";
                isValid = false;
            }

            if (isValid) {
                localStorage.setItem("onboardingData", JSON.stringify(data));
                alert("Form successfully submitted!");
                window.location.href = "Assert.html";
            }
        });
    </script>
</body>
</html>