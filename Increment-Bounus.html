<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bonus Proposal Form</title>
<style>
  /* Base Styles */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    color: #2c3e50;
    line-height: 1.6;
  }

  header {
    background: linear-gradient(135deg, #3498db, #2c3e50);
    color: white;
    text-align: center;
    padding: 1rem;

    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  header h1 {
    margin: 0;
    font-size: 2rem;
    font-weight: 600;
  }

  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 20px 40px;
  }

  .button-container {
  padding: 20px 20px; 
  text-align: center;
  margin-bottom: 30px;
  margin-left: auto;
  overflow: hidden; 
}

  .form-toggle-btn {
    background: linear-gradient(135deg, #3498db, #2c3e50);
    color: white;
    border: none;
    border-radius: 30px;
    padding: 12px 25px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    float: right;
  }

  .form-toggle-btn:hover {
    background: linear-gradient(135deg,#2c3e50, #3498db);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.3);
  }

  .form-toggle-btn::before {
    content: "+";
    font-size: 20px;
  }

  /* Form Section */
  .form-section {
    background: white;
    border-radius: 12px;
    padding: 25px;
    margin: 0 auto 30px;
    max-width: 600px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    display: none;
  }

  .form-section.active {
    display: block;
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  label {
    font-weight: 600;
    color: #2c3e50;
    display: block;
    margin-bottom: 5px;
  }

  .required-field label::after {
    content: " *";
    color: #e74c3c;
    font-size: 1.1em;
  }

  .required-field label {
    font-weight: 600;
  }

  input, textarea {
    width: 98%;
    padding: 12px;
    border: 2px solid #e0e0e0;
    border-radius: 6px;
    font-size: 16px;
    transition: all 0.3s;
  }

  input:focus, textarea:focus {
    border-color: #3498db;
    outline: none;
    box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
  }

  textarea {
    resize: none;
    min-height: 100px;
  }

  .error-message {
    font-size: 0.85rem;
    color: #e74c3c;
    margin-top: 5px;
    display: block;
  }

  .button-group {
    display: flex;
    gap: 15px;
    margin-top: 10px;
  }

  .submit-btn, .close-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }

  .submit-btn {
    background: linear-gradient(135deg, #3498db, #2c3e50);
    color: white;
  }

  .submit-btn:hover {
    background: linear-gradient(135deg, #2c3e50, #3498db);
    transform: translateY(-2px);
  }

  .close-btn {
    background: #f5f5f5;
    color: #555;
  }

  .close-btn:hover {
    background: #e0e0e0;
    transform: translateY(-2px);
  }
  .recent-bonus-section {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 800px;
    margin: 0px auto;
    padding: 25px;
    background-color: #ffffff;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  /* New container for heading and button */
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .recent-bonus-section h2 {
    color: #3498db;
    margin: 0; /* Remove default margin */
    font-size: 24px;
    font-weight: 600;
    display: flex;
    align-items: center;
  }

  .recent-bonus-section h2::before {
    content: "";
    display: inline-block;
    width: 5px;
    height: 24px;
    background-color: #3498db;
    margin-right: 12px;
    border-radius: 3px;
  }

  .button-container {
    margin-bottom: 0; /* Remove bottom margin */
  }

  /* .form-toggle-btn {
    background-color: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3);
  }

  .form-toggle-btn:hover {
    background-color: #2980b9;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
  } */

  .recent-bonus {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border-left: 4px solid #3498db;
  }

  .recent-bonus p {
    margin: 10px 0;
    font-size: 15px;
    color: #333;
    line-height: 1.5;
  }

  .recent-bonus strong {
    color: #2c3e50;
    font-weight: 600;
    min-width: 120px;
    /* display: inline-block; */
  }

  /* Responsive design */
  @media (max-width: 600px) {
    .recent-bonus-section {
      padding: 15px;
    }
    
    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    
    .recent-bonus p {
      font-size: 14px;
    }
    
    .recent-bonus strong {
      min-width: 100px;
      display: inline-block;
    }
  }

  /* Recent Bonus Section */
  /* .recent-bonus-section {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 30px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.062);

  } */

  /* .recent-bonus {
  background: white;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  position: relative;
  flex: 1 1 300px;
  max-width: calc(33.33% - 20px);
  min-width: 250px;
  min-height: 250px; 
  word-wrap: break-word; 
  overflow: hidden; 
} */

/* .recent-bonus p {
  margin: 8px 0;
  word-break: break-word; 
} */

  .status {
    padding: 4px 10px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.85rem;
  }

  .status-pending {
    background-color: #FFF3E0;
    color: #FF8F00;
  }

  .status-approved {
    background-color: #E8F5E9;
    color: #2E7D32;
  }

  .status-rejected {
    background-color: #FFEBEE;
    color: #C62828;
  }

  /* Responsive Design */
  @media (max-width: 900px) {
    .recent-bonus {
      max-width: calc(50% - 20px);
    }
  }

  @media (max-width: 768px) {
    header {
      padding: 1.5rem 1rem;
    }
    
    header h1 {
      font-size: 1.5rem;
    }
    
    .container {
      padding: 0 15px 30px;
    }
    
    .form-section {
      padding: 20px;
    }
    
    .button-group {
      flex-direction: column;
    }
  }

  @media (max-width: 600px) {
    .recent-bonus {
      max-width: 100%;
    }
  }
</style>
</head>
<body>
  <header>
    <h1>Bonus Proposal Form</h1>
    <p>"Rewarding excellence, driving performance"</p>
  </header>

  <div class="container">

    <div id="proposalFormSection" class="form-section">
      <form id="proposalForm">
        <div class="form-group required-field">
          <label for="employeeName">Employee Name:</label>
          <input 
          type="text" 
          id="employeeName" 
          name="employeeName" 
          pattern="^[A-Za-z]+( [A-Za-z]+)*$"
          minlength="4"
          maxlength="30"
          title="Employee Name must contain letters with single spaces between words" 
          required
        >
          <span id="employeeNameError" class="error-message"></span>
        </div>
        
        <div class="form-group required-field">
          <label for="employeeID">Employee ID:</label>
          <input 
            type="text" 
            id="employeeID" 
            name="employeeID" 
            pattern="^ATS0(?!000)\d{3}$" 
            maxlength="7"
            title="Employee ID must start with ATS0 or EJMP followed by 3 digits (e.g., ATS0123)" 
            required
          >
          <span id="employeeIDError" class="error-message"></span>
        </div>
        
        <div class="form-group required-field">
          <label for="bonusAmount">Bonus Amount (₹):</label>
          <input 
            type="number" 
            id="bonusAmount" 
            name="bonusAmount" 
            min="100" 
            step="100"
            required 
            title="Minimum bonus amount is ₹100"
          >
          <span id="bonusAmountError" class="error-message"></span>
        </div>
        
        <div class="form-group required-field">
          <label for="reason">Reason for Bonus:</label>
          <textarea 
            id="reason" 
            name="reason" 
            rows="3" 
            required 
            minlength="10"
            maxlength="150"
            title="Only letters and basic punctuation (. , ! ? -) with single spaces between words"
            style="overflow-y: auto; resize: vertical;"
          ></textarea>
          <span id="reasonError" class="error-message"></span>
        </div>
        
        <div class="button-group">
          <button type="submit" class="submit-btn">Submit Proposal</button>
          <button type="button" class="close-btn" onclick="closeForm()">Close</button>
        </div>
      </form>
    </div>

    <div class="recent-bonus-section">
      <div class="section-header">
        <h2 style="color: #3498db;">Recent Bonus Data</h2>
        <div class="button-container">
          <button class="form-toggle-btn" onclick="toggleForm()">New Proposal</button>
        </div>
      </div>
    
      <div class="recent-bonus">
        <p><strong>Employee Name:</strong> Veera Raghava</p>
        <p><strong>Employee ID:</strong> ATS0123</p>
        <p><strong>Bonus Amount:</strong> 5,000</p>
        <p><strong>Reason:</strong> Bonus for good performance</p>
        <p><strong>Status:</strong> <span class="status status-pending">Pending Approval</span></p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const proposalForm = document.getElementById('proposalForm');
      const recentBonusSection = document.querySelector('.recent-bonus-section');
      const employeeNameInput = document.getElementById('employeeName');
      const employeeIDInput = document.getElementById('employeeID');
      const bonusAmountInput = document.getElementById('bonusAmount');
      const reasonInput = document.getElementById('reason');
      const employeeNameError = document.getElementById('employeeNameError');
      const employeeIDError = document.getElementById('employeeIDError');
      const bonusAmountError = document.getElementById('bonusAmountError');
      const reasonError = document.getElementById('reasonError');
  
      function handleInputValidation(event) {
        const input = event.target;
        const value = input.value;
        
        if (event.key === ' ' && value.slice(-1) === ' ') {
          event.preventDefault();
          return;
        }
        
        if (input === employeeNameInput) {
          const isValid = /^[A-Za-z]+( [A-Za-z]+)*$/.test(value);
          if (!isValid && value.trim() !== '') {
            input.setCustomValidity('Only letters and single spaces between words allowed');
            employeeNameError.textContent = 'Only letters and single spaces between words allowed';
          } else {
            input.setCustomValidity('');
            employeeNameError.textContent = '';
          }
        }
        
        if (input === reasonInput) {
          const isValid = /^[A-Za-z0-9.,!?\-()]+( [A-Za-z0-9.,!?\-()]+)*$/.test(value);
          if (!isValid && value.trim() !== '') {
            input.setCustomValidity('Only letters, numbers, punctuation and single spaces allowed');
            reasonError.textContent = 'Only letters, numbers, punctuation and single spaces allowed';
          } else {
            input.setCustomValidity('');
            reasonError.textContent = '';
          }
        }
      }
  
      function cleanUpSpaces(event) {
        const input = event.target;
        input.value = input.value.replace(/\s+/g, ' ').trim();
      }
  
      employeeNameInput.addEventListener('keydown', handleInputValidation);
      employeeNameInput.addEventListener('input', handleInputValidation);
      employeeNameInput.addEventListener('blur', cleanUpSpaces);
      
      reasonInput.addEventListener('keydown', handleInputValidation);
      reasonInput.addEventListener('input', handleInputValidation);
      reasonInput.addEventListener('blur', cleanUpSpaces);
  
      employeeIDInput.addEventListener('input', () => {
        if (!employeeIDInput.validity.valid) {
          employeeIDError.textContent = 'Format: ATS0 followed by 3 digits (e.g., ATS0123)';
        } else {
          employeeIDError.textContent = '';
        }
      });
  
      bonusAmountInput.addEventListener('input', () => {
        if (bonusAmountInput.value.length > 7) {
          bonusAmountInput.value = bonusAmountInput.value.slice(0,7);
        }
        if (parseInt(bonusAmountInput.value) < 100) {
          bonusAmountError.textContent = 'Minimum bonus amount is ₹100';
          bonusAmountInput.setCustomValidity('Minimum bonus amount is ₹100');
        } else {
          bonusAmountError.textContent = '';
          bonusAmountInput.setCustomValidity('');
        }
      });
  
      proposalForm.addEventListener('submit', (event) => {
        event.preventDefault();
        
        // Clean up spaces before final validation
        cleanUpSpaces({target: employeeNameInput});
        cleanUpSpaces({target: reasonInput});
        
        // Validate all fields
        if (!proposalForm.checkValidity()) {
          if (!employeeNameInput.validity.valid) {
            employeeNameError.textContent = employeeNameInput.validationMessage || 
              'Please enter a valid name (letters and single spaces only)';
          }
          if (!employeeIDInput.validity.valid) {
            employeeIDError.textContent = employeeIDInput.validationMessage || 
              'Please enter a valid Employee ID (ATS0 followed by 3 digits)';
          }
          if (!bonusAmountInput.validity.valid) {
            bonusAmountError.textContent = bonusAmountInput.validationMessage || 
              'Minimum bonus amount is ₹100';
          }
          if (!reasonInput.validity.valid) {
            reasonError.textContent = reasonInput.validationMessage || 
              'Please enter a valid reason (letters, numbers, punctuation and single spaces)';
          }
          return;
        }
  
        // If all valid, proceed with form submission
        const employeeName = employeeNameInput.value;
        const employeeID = employeeIDInput.value;
        const bonusAmount = bonusAmountInput.value;
        const reason = reasonInput.value;
  
        const newCard = document.createElement('div');
        newCard.className = 'recent-bonus';
        newCard.innerHTML = `
          <p><strong>Employee Name:</strong> ${employeeName}</p>
          <p><strong>Employee ID:</strong> ${employeeID}</p>
          <p><strong>Bonus Amount:</strong> ₹${Number(bonusAmount).toLocaleString()}</p>
          <p><strong>Reason:</strong> ${reason}</p>
          <p><strong>Status:</strong> <span class="status status-pending">Pending Approval</span></p>
        `;
  
        recentBonusSection.insertBefore(newCard, recentBonusSection.firstChild);
        proposalForm.reset();
        closeForm();
      });
    });
  
    function closeForm() {
      document.getElementById('proposalFormSection').classList.remove('active');
      document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
      document.getElementById('proposalForm').reset();
    }
  
    function toggleForm() {
      const formSection = document.getElementById('proposalFormSection');
      formSection.classList.toggle('active');
      if (!formSection.classList.contains('active')) {
        closeForm();
      }
    }
  </script>
</body>
</html>